// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: notification_channels.sql

package generated

import (
	"context"
)

const createNotificationChannel = `-- name: CreateNotificationChannel :one
INSERT INTO notification_channels (channel_id, channel_type, display_name, enabled, config)
VALUES (?, ?, ?, ?, ?)
RETURNING channel_id, channel_type, display_name, enabled, config, created_at, updated_at
`

type CreateNotificationChannelParams struct {
	ChannelID   string `json:"channel_id"`
	ChannelType string `json:"channel_type"`
	DisplayName string `json:"display_name"`
	Enabled     int64  `json:"enabled"`
	Config      string `json:"config"`
}

func (q *Queries) CreateNotificationChannel(ctx context.Context, arg CreateNotificationChannelParams) (NotificationChannel, error) {
	row := q.db.QueryRowContext(ctx, createNotificationChannel,
		arg.ChannelID,
		arg.ChannelType,
		arg.DisplayName,
		arg.Enabled,
		arg.Config,
	)
	var i NotificationChannel
	err := row.Scan(
		&i.ChannelID,
		&i.ChannelType,
		&i.DisplayName,
		&i.Enabled,
		&i.Config,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const deleteNotificationChannel = `-- name: DeleteNotificationChannel :exec
DELETE FROM notification_channels WHERE channel_id = ?
`

func (q *Queries) DeleteNotificationChannel(ctx context.Context, channelID string) error {
	_, err := q.db.ExecContext(ctx, deleteNotificationChannel, channelID)
	return err
}

const getEnabledNotificationChannels = `-- name: GetEnabledNotificationChannels :many
SELECT channel_id, channel_type, display_name, enabled, config, created_at, updated_at FROM notification_channels WHERE enabled = 1 ORDER BY created_at ASC
`

func (q *Queries) GetEnabledNotificationChannels(ctx context.Context) ([]NotificationChannel, error) {
	rows, err := q.db.QueryContext(ctx, getEnabledNotificationChannels)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []NotificationChannel{}
	for rows.Next() {
		var i NotificationChannel
		if err := rows.Scan(
			&i.ChannelID,
			&i.ChannelType,
			&i.DisplayName,
			&i.Enabled,
			&i.Config,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getNotificationChannel = `-- name: GetNotificationChannel :one
SELECT channel_id, channel_type, display_name, enabled, config, created_at, updated_at FROM notification_channels WHERE channel_id = ?
`

func (q *Queries) GetNotificationChannel(ctx context.Context, channelID string) (NotificationChannel, error) {
	row := q.db.QueryRowContext(ctx, getNotificationChannel, channelID)
	var i NotificationChannel
	err := row.Scan(
		&i.ChannelID,
		&i.ChannelType,
		&i.DisplayName,
		&i.Enabled,
		&i.Config,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getNotificationChannels = `-- name: GetNotificationChannels :many
SELECT channel_id, channel_type, display_name, enabled, config, created_at, updated_at FROM notification_channels ORDER BY created_at ASC
`

func (q *Queries) GetNotificationChannels(ctx context.Context) ([]NotificationChannel, error) {
	rows, err := q.db.QueryContext(ctx, getNotificationChannels)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []NotificationChannel{}
	for rows.Next() {
		var i NotificationChannel
		if err := rows.Scan(
			&i.ChannelID,
			&i.ChannelType,
			&i.DisplayName,
			&i.Enabled,
			&i.Config,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateNotificationChannel = `-- name: UpdateNotificationChannel :one
UPDATE notification_channels
SET display_name = ?,
    enabled = ?,
    config = ?,
    updated_at = CURRENT_TIMESTAMP
WHERE channel_id = ?
RETURNING channel_id, channel_type, display_name, enabled, config, created_at, updated_at
`

type UpdateNotificationChannelParams struct {
	DisplayName string `json:"display_name"`
	Enabled     int64  `json:"enabled"`
	Config      string `json:"config"`
	ChannelID   string `json:"channel_id"`
}

func (q *Queries) UpdateNotificationChannel(ctx context.Context, arg UpdateNotificationChannelParams) (NotificationChannel, error) {
	row := q.db.QueryRowContext(ctx, updateNotificationChannel,
		arg.DisplayName,
		arg.Enabled,
		arg.Config,
		arg.ChannelID,
	)
	var i NotificationChannel
	err := row.Scan(
		&i.ChannelID,
		&i.ChannelType,
		&i.DisplayName,
		&i.Enabled,
		&i.Config,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
